# 彩诗禾-数字一体化厂区管控平台  
移动端高保真原型页面总览（HTML 版）

> 说明：本说明文档对应当前目录下的 HTML 原型文件，主要用于产品、设计和开发对齐整体信息架构与页面职责。所有页面均以 iPhone 15 Pro 尺寸进行视觉还原，使用 TailwindCSS + FontAwesome，并采用柔和清亮的绿色工业风。

---

## 1. 认证与账号/权限体系

### 1.1 登录页 `login.html`
- 目标角色：所有用户（管理员、值班人员、查看者）。
- 主要功能：
  - 展示系统名称与品牌视觉：“彩诗禾-数字一体化厂区管控平台”。
  - 支持“微信安全登录”入口（主按钮），说明会获取微信昵称、头像，并用于后续账号体系与生产线权限配置。
  - 提供“手机号登录（原型示意）”次要入口，用于说明后续可扩展的登录方式。
  - 底部展示示例管理员账号“彩诗禾·生产管理员”，支持“直接体验”跳转首页（方便原型走查）。
- 与其他页面关系：
  - 登录成功后跳转 `home.html`。
  - 微信授权后的用户信息在 `settings_permissions.html` 中用于角色与权限管理。

### 1.2 我的与权限管理 `settings_permissions.html`
- 目标角色：管理员为主，亦可作为个人信息查看入口。
- 主要功能：
  - 展示当前登录用户基础信息（微信授权状态、微信昵称、角色类型等）。
  - 展示角色与访问权限：
    - 显示当前账号角色（管理员 / 值班人员 / 查看者）。
    - 以 Tag 形式列出可访问的生产线（按车间+生产线命名，如“纺一车间 · 1#线（全工序）”），体现精细化授权。
  - 微信授权用户管理：
    - 列表展示已授权的微信用户（如“李四 · 值班人员”、“王五 · 查看者”）。
    - 每条记录提供“配置权限”按钮，原型层面表示将进入详细的生产线与操作权限配置。
  - 权限分享：
    - 说明可通过链接/二维码分享查看权限，并提供二维码占位和“分享查看权限”按钮。
  - 系统支撑入口：
    - 提供到 `system_logs.html`（操作日志与告警记录）的入口。

### 1.3 系统日志与告警 `system_logs.html`
- 目标角色：管理员、审计人员。
- 主要功能：
  - 日志类型筛选：登录、数据录入、权限变更、告警、大模型调用等。
  - 日志列表示例：
    - 微信登录成功日志（包含 OpenID）。
    - 巡检表单提交日志。
    - 断头率超限告警记录。
    - 大模型调用失败记录。
- 与其他页面关系：
  - 从 `settings_permissions.html` 进入，用于排查异常和审计关键操作。

---

## 2. 班次配置与巡检任务配置

### 2.1 巡检班次配置 `inspection_shift_config.html`
- 目标角色：管理员。
- 核心定位：定义“班次 + 值班人员”，是巡检任务生成的时间轴基础。
- 主要功能：
  - 顶部说明卡片：解释可以为各生产线配置白班/中班/夜班以及对应值班人员。
  - 班次列表：
    - 按“车间 · 生产线”展示，例如：
      - “纺一车间 · 1#纺纱生产线”
      - “纺一车间 · 2#纺纱生产线”
    - 每个生产线下列出白班、中班、夜班的时间段与指派人员。
    - “配置班次”按钮：打开班次模板配置弹层。
  - 顶部右上角 `+` 按钮：
    - 打开“新增车间”弹层（模拟在当前页直接新增车间的交互）。
  - 弹层交互：
    - 车间新增/编辑弹层：
      - 字段示例：车间名称、车间编码、所属工厂。
      - 底部“取消 / 保存”按钮。
      - 保存后会关闭弹层并显示顶部“保存成功”Toast。
    - 班次模板配置弹层：
      - 针对某车间·生产线，配置白班/中班/夜班的时间段和默认值班人。
      - 支持新增班次、编辑班次（表单示意：班次名称、时间段、默认值班人、启用开关）。
      - 保存操作也通过 Toast 模拟“保存成功”。

### 2.2 车间配置 `workshop_config.html`
- 目标角色：管理员（组织架构维护）。
- 核心定位：工厂/车间层级与班次模板的基础配置。
- 主要功能：
  - 车间列表：
    - 展示车间名称、编码、关联生产线数量。
    - 每行支持编辑、删除按钮。
  - 车间新增/编辑表单：
    - 字段：车间名称、车间编码、所属工厂等。
  - 车间下班次模板配置：
    - 针对某车间配置班次模板（白班、中班等），说明适用生产线、默认值班人员。
    - 支持对班次模板的新增/编辑/删除。
- 与班次配置、巡检任务配置的关系：
  - 班次配置页按“车间 · 生产线”展示，车间列表与命名来自本页面。

### 2.3 巡检任务配置 `inspection_task_config.html`
- 目标角色：管理员。
- 核心定位：以“车间（已经融合生产线命名） + 工序 + 机器”为维度，配置巡检所需的机器清单，是巡检任务生成的空间轴与设备轴基础。
- 主要功能：
  - 当前配置对象（以车间为单位）：
    - 示例车间：`纺一车间 · 1#纺纱线`、`纺一车间 · 2#纺纱线`等。
    - 通过按钮切换当前配置对象，后续工序机器配置针对选中的车间进行。
  - 工序机器配置卡片：
    - 按纺纱流程列出各工序：
      - 开清棉、梳棉、并条、精梳、粗纺、细纺、络筒。
    - 每行展示“当前配置机器数量：X 台”，右侧“配置机器”按钮打开机器配置弹层。
  - 工序机器配置弹层（`machineModal`）：
    - 上方说明当前工序 + 车间（例如“开清棉 · 纺一车间 · 1#纺纱线”）。
    - 显示当前机器数量（只读，用机器清单自动统计）。
    - 提示文案：每增加/删除一台机器，对应生成/取消一条巡检任务。
    - “机器清单示例”:
      - 列出例如 KQ-01-A / KQ-02-A 等机器，包含名称、位置、参与班次说明。
      - 每条记录右侧提供：
        - 编辑按钮：打开下方表单，编辑机器名称、编号、位置、参与班次（示意）。
        - 删除按钮：原型层面展示删除入口（实际数据操作由后端实现）。
    - “新增机器”按钮：
      - 打开下方“机器配置表单区”（空白表单），用于录入新机器的信息：
        - 机器名称、机器编号、安装位置、参与班次 Tag（白班、中班、夜班）。
    - 底部按钮：
      - “取消”：关闭弹层。
      - “保存”：关闭弹层并显示顶部“保存成功”Toast，模拟配置保存成功反馈。

---

## 3. 巡检任务执行与数据录入

### 3.1 首页总览 `home.html`
- 目标角色：管理员、值班人员、查看者。
- 核心定位：移动端入口与关键指标总览。
- 主要内容：
  - 顶部展示当前班次（如“今日白班”）与当前用户（管理员头像）。
  - 指标卡片：
    - 生产线巡检完成率（如 86%，完成 24/28 条线）。
    - 待巡检任务数量。
    - 当前告警数量。
  - “开清棉 → 络筒全流程巡检”卡片：
    - 展示 7 个工序（开清棉、梳棉、并条、精梳、粗纺、细纺、络筒）。
    - 显示本班已完成工序数量，并提供“继续本班巡检”按钮跳转表单。
  - 快捷入口：
    - 巡检任务 `inspection_tasks.html`
    - 生产线看板 `dashboard_overview.html`
    - 周报/月报 `analytics_reports.html`
    - 巡检班次配置 `inspection_shift_config.html`
    - 巡检任务配置 `inspection_task_config.html`
  - 权限与系统健康卡片：
    - 展示已授权微信用户数量、最近 24 小时告警数量。
    - 间接引导管理员进入权限管理页。

### 3.2 巡检任务列表 `inspection_tasks.html`
- 目标角色：值班人员。
- 核心定位：按“日期 + 班次 + 车间 · 生产线”展示待办巡检班次任务。
- 主要功能：
  - 顶部过滤：
    - 日期 + 班次（如 2025-05-16 白班）。
    - 统计待巡检班次数量、当前登录值班人信息。
  - 班次任务卡片：
    - 示例：白班 · 纺一车间 1#纺纱线 / 白班 · 2#线 / 夜班 · 3#线等。
    - 显示该班次下各工序机器数量概况（开清棉 · 2 台、粗纺 · 5 台等）。
    - 展示“工序完成数量”“机器录入数量”等进度信息。
    - 提供“进入班次巡检”“开始巡检”等按钮，链接到 `inspection_form.html`。
  - 历史已完成任务卡片：
    - 标记为“已完成”，并可跳转至 `inspection_history.html` 查看详情。

### 3.3 巡检表单 `inspection_form.html`
- 目标角色：值班人员（执行巡检）。
- 核心定位：在指定班次下，按工序和机器逐台录入巡检数据。
- 主要功能：
  - 班次与工序导航：
    - 标题：巡检表单 · 白班 · 1#纺纱线。
    - 显示当前工序（如开清棉）和当班巡检人。
    - Tag 展示 7 个工序，并提示本班该工序需巡检机器数量，以及当前机器编号（如 KQ-01-A）。
  - 当前工序的机器切换：
    - 为该工序列出本班需巡检的机器（例如 KQ-01-A、KQ-02-A），标出录入状态（录入中/未巡检）。
  - 指标录入：
    - 针对当前机器、当前工序，提供关键指标输入：
      - 数值型指标（如主电机电流、喂入棉重量、除杂效率）。
      - 状态类指标（设备运行状态、安全防护装置等）。
    - 带有合理范围、单位和校验提示。
  - 照片与自动识别入口：
    - 引导至 `photo_ocr.html` 进行拍照和 OCR 识别，并将结果回填到表单。
  - 提交与流转：
    - 支持补充说明、是否同步看板。
    - 提交按钮：“提交并进行下一工序”。

### 3.4 历史巡检记录 `inspection_history.html`
- 目标角色：管理员、值班人员。
- 主要功能：
  - 过滤条件：时间范围、车间/生产线、工序、是否异常等。
  - 列表展示每次巡检记录摘要：工序、生产线、巡检人、时间、是否异常。
  - 可跳转至 `device_detail.html` 查看设备级别的历史数据与照片。

### 3.5 照片采集与识别填数 `photo_ocr.html`
- 目标角色：值班人员。
- 主要功能：
  - 显示仪表盘照片（真实图片示例）。
  - 显示 OCR 识别结果（如电流、重量、效率），支持自动填充回表单。
  - 展示字段映射关系：识别结果与表单中哪个指标项对应。
  - 支持“手工修正”和“确认并返回表单”的按钮交互。

---

## 4. 看板与数据分析

### 4.1 生产线总览看板 `dashboard_overview.html`
- 目标角色：班组长、车间主任、厂长等查看角色。
- 主要功能：
  - 支持按车间/生产线/工序/值班人员维度进行概览。
  - 指标摘要：
    - 今日巡检完成率。
    - 当前异常与告警数量（区分严重/轻微）。
  - 生产线卡片：
    - 展示某条生产线从开清棉到络筒的工序链路。
    - 给出工序完成情况、断头率、能耗等关键指标。
    - 异常线以“轻微异常”等标签标注。
  - 点击生产线卡片可跳转 `device_detail.html`。

### 4.2 设备详情分析 `device_detail.html`
- 目标角色：设备工程师、维护人员。
- 主要功能：
  - 展示单台设备基本信息：设备名称、编号、所属生产线、位置、运行状态、维保周期等。
  - 关键指标趋势占位图（可接 ECharts 等实际图表库）。
  - 最近巡检记录列表（正常/轻微异常等）。
  - 现场照片缩略图（简化为灰色占位块）。

### 4.3 统计与报告 `analytics_reports.html`
- 目标角色：管理层、工艺/质量工程师。
- 主要功能：
  - 统计周期配置：周报、月报、自定义周期。
  - 报告列表：
    - 示例周报/月报卡片，含生成时间、覆盖的车间/生产线、主要内容说明。
    - 支持“查看”和“导出 PDF/Word”的按钮。
  - 大模型辅助分析说明：
    - 说明可调用大模型对巡检数据和看板趋势进行文字分析与建议生成。

---

## 5. 交互风格与技术实现说明（简要）

- 技术栈（原型层面）：
  - HTML + TailwindCSS CDN + FontAwesome 图标。
  - iPhone 15 Pro 尺寸容器，圆角大壳 + 阴影模拟手机。
  - 统一顶部状态栏、导航栏、底部 TabBar（首页 / 巡检 / 看板 / 报表 / 我的）。
- 交互特点：
  - 重要配置（班次配置、任务配置）采用弹层形式展示，模拟微信小程序中弹出表单/面板的交互。
  - Toast 提示（保存成功、新增机器示意）用于体现保存类操作的反馈。
  - 所有数据编辑动作目前为“静态交互示意”，方便前端和后端在实现时对接真实接口与状态管理。

---

## 6. 页面与流程简要串联

1. 用户通过 `login.html` 使用微信授权登录，进入 `home.html`。
2. 管理员：
   - 在 `inspection_shift_config.html` / `workshop_config.html` 中配置车间与班次、值班人员。
   - 在 `inspection_task_config.html` 中按车间·工序配置机器清单（机器数量、编号、名称、位置等）。
3. 系统据此生成班次巡检任务，值班人员在 `inspection_tasks.html` 看到自己负责的班次任务。
4. 值班人员进入 `inspection_form.html`，按工序和机器进行巡检数据录入，可通过 `photo_ocr.html` 完成照片识别填数。
5. 已完成的巡检记录在 `inspection_history.html`、`dashboard_overview.html`、`device_detail.html` 中以不同粒度展示。
6. 管理者在 `analytics_reports.html` 查看周期报表，在 `settings_permissions.html` 管理角色与权限，在 `system_logs.html` 查询操作日志与告警。

该 HTML 原型集基本覆盖了你提出的所有业务功能点，前端和后端可以据此对照页面职责与数据结构，进行组件拆分和服务接口设计。 

