<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>生产线总览看板 - 彩诗禾-数字一体化厂区管控平台</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#16a34a',
            primaryLight: '#dcfce7',
            primarySoft: '#ecfdf3'
          }
        }
      }
    };
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script>
    function openOverviewFilterModal() {
      var modal = document.getElementById('overviewFilterModal');
      if (modal) modal.classList.remove('hidden');
    }
    function closeOverviewFilterModal() {
      var modal = document.getElementById('overviewFilterModal');
      if (modal) modal.classList.add('hidden');
      // 关闭时收起值班人员下拉
      var dropdown = document.getElementById('dutyDropdown');
      if (dropdown) dropdown.classList.add('hidden');
    }
    function toggleDutyDropdown() {
      var dropdown = document.getElementById('dutyDropdown');
      if (!dropdown) return;
      dropdown.classList.toggle('hidden');
    }
    function selectDuty(name) {
      var label = document.getElementById('dutySelected');
      if (label) label.textContent = name;
      var dropdown = document.getElementById('dutyDropdown');
      if (dropdown) dropdown.classList.add('hidden');
    }
  </script>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen">
  <div class="w-[393px] h-[852px] bg-gradient-to-b from-emerald-50 to-white rounded-[40px] shadow-[0_20px_60px_rgba(16,185,129,0.45)] border border-emerald-100 overflow-hidden relative flex flex-col">
    <!-- 状态栏 -->
    <div class="h-11 px-4 flex items-center justify-between text-xs text-slate-700">
      <div class="font-semibold">9:41</div>
      <div class="flex items-center gap-1.5">
        <i class="fa-solid fa-signal"></i>
        <i class="fa-solid fa-wifi"></i>
        <i class="fa-solid fa-battery-full"></i>
      </div>
    </div>

    <!-- 顶部导航 -->
    <div class="px-4 pb-2 flex items-center justify-between">
      <button onclick="history.back()" class="w-8 h-8 rounded-full bg-white/80 border border-emerald-100 flex items-center justify-center text-slate-600 text-xs">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <div class="text-sm font-semibold text-slate-900">生产线总览看板</div>
      <button onclick="openOverviewFilterModal()" class="w-8 h-8 rounded-full bg-white/80 border border-emerald-100 flex items-center justify-center text-slate-600 text-xs" aria-label="看板统计配置">
        <i class="fa-solid fa-sliders"></i>
      </button>
    </div>

    <!-- 内容区 -->
    <div class="flex-1 overflow-y-auto px-4 pb-20 bg-gradient-to-b from-emerald-50/80 to-white space-y-3">
      <!-- 筛选与关键指标（以车间·班次为维度） -->
      <div class="bg-white rounded-2xl border border-emerald-100 p-3 space-y-2">
        <div class="flex items-center justify-between text-[11px] text-slate-600">
          <div class="flex items-center gap-1.5">
            <i class="fa-solid fa-location-dot text-emerald-500"></i>
            <span>全部车间 · 全部班次</span>
          </div>
          <span>统计周期：今日</span>
        </div>
        <div class="grid grid-cols-3 gap-2 text-[11px]">
          <button class="px-2 py-1.5 rounded-xl bg-primary text-white flex items-center justify-center gap-1 active:scale-95">
            <i class="fa-solid fa-layer-group"></i>
            全部工序
          </button>
          <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700 hover:bg-emerald-100">
            <i class="fa-solid fa-industry mr-1"></i>车间
          </button>
          <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700 hover:bg-emerald-100">
            <i class="fa-solid fa-users mr-1"></i>值班人员
          </button>
        </div>
        <div class="flex items-center gap-1 text-[10px] text-slate-500">
          <i class="fa-solid fa-database text-[9px] text-emerald-500"></i>
          <span>数据来源：今日各班次值班人员在巡检表单中录入的设备运行数据。</span>
        </div>
      </div>

      <!-- 今日状态摘要（来自巡检数据汇总） -->
      <div class="grid grid-cols-2 gap-2">
        <div class="bg-white rounded-2xl border border-emerald-100 p-3">
          <div class="text-[11px] text-slate-500 mb-1">巡检完成率</div>
          <div class="flex items-end justify-between">
            <span class="text-2xl font-semibold text-red-500">86%</span>
            <span class="text-[10px] text-slate-500">目标 ≥ 95%</span>
          </div>
          <div class="mt-2 h-1.5 rounded-full bg-emerald-50 overflow-hidden">
            <div class="h-full w-[86%] bg-gradient-to-r from-emerald-500 to-emerald-400"></div>
          </div>
        </div>
        <div class="bg-white rounded-2xl border border-emerald-100 p-3">
          <div class="text-[11px] text-slate-500 mb-1">当前异常与告警</div>
          <div class="flex items-end justify-between mb-1">
            <span class="text-xl font-semibold text-orange-500">3</span>
            <span class="text-[10px] text-slate-500">重度：1 · 轻微：2</span>
          </div>
          <div class="flex items-center gap-1 text-[10px] text-slate-500">
            <span class="w-1.5 h-1.5 rounded-full bg-red-500"></span> 并条
            <span class="w-1.5 h-1.5 rounded-full bg-amber-400 ml-2"></span> 粗纺
          </div>
        </div>
      </div>

      <!-- 班次完成率柱状图（按车间·班次维度） -->
      <div class="bg-white rounded-2xl border border-emerald-100 p-3 space-y-2">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-1.5">
            <i class="fa-solid fa-chart-column text-emerald-500 text-xs"></i>
            <span class="text-xs font-medium text-slate-800">班次完成率对比（车间 · 班次）</span>
          </div>
          <div class="flex items-center gap-1">
            <button class="px-2 py-0.5 rounded-full bg-primarySoft text-primary text-[10px]">按车间·班次</button>
            <button class="px-2 py-0.5 rounded-full bg-emerald-50 text-slate-600 text-[10px]">按班次汇总</button>
          </div>
        </div>
        <!-- 简化版柱状图：X 轴为“车间 · 班次”组合 -->
        <div class="mt-2">
          <!-- Y 轴刻度 -->
          <div class="flex flex-col h-24 justify-between text-[9px] text-slate-400">
            <div class="flex items-center gap-1">
              <span class="w-6 text-right">100%</span>
              <div class="flex-1 h-px bg-slate-100"></div>
            </div>
            <div class="flex items-center gap-1">
              <span class="w-6 text-right">75%</span>
              <div class="flex-1 h-px bg-slate-100"></div>
            </div>
            <div class="flex items-center gap-1">
              <span class="w-6 text-right">50%</span>
              <div class="flex-1 h-px bg-slate-100"></div>
            </div>
            <div class="flex items-center gap-1">
              <span class="w-6 text-right">25%</span>
              <div class="flex-1 h-px bg-slate-100"></div>
            </div>
          </div>
          <!-- 柱体区域 -->
          <div class="mt-1 flex items-end justify-around">
            <div class="flex flex-col items-center gap-1">
              <div class="flex-1 flex items-end">
                <div class="w-6 bg-emerald-100 rounded-t-md overflow-hidden flex items-end justify-center">
                  <div class="w-4 bg-emerald-500 rounded-t-md" style="height:88%;"></div>
                </div>
              </div>
              <div class="text-[9px] text-slate-600 text-center leading-tight">
                纺一·白班
              </div>
              <div class="text-[9px] text-emerald-600">88%</div>
            </div>
            <div class="flex flex-col items-center gap-1">
              <div class="flex-1 flex items-end">
                <div class="w-6 bg-emerald-100 rounded-t-md overflow-hidden flex items-end justify-center">
                  <div class="w-4 bg-emerald-400 rounded-t-md" style="height:80%;"></div>
                </div>
              </div>
              <div class="text-[9px] text-slate-600 text-center leading-tight">
                纺一·中班
              </div>
              <div class="text-[9px] text-emerald-600">80%</div>
            </div>
            <div class="flex flex-col items-center gap-1">
              <div class="flex-1 flex items-end">
                <div class="w-6 bg-emerald-100 rounded-t-md overflow-hidden flex items-end justify-center">
                  <div class="w-4 bg-emerald-300 rounded-t-md" style="height:72%;"></div>
                </div>
              </div>
              <div class="text-[9px] text-slate-600 text-center leading-tight">
                纺一·夜班
              </div>
              <div class="text-[9px] text-emerald-600">72%</div>
            </div>
            <div class="flex flex-col items-center gap-1">
              <div class="flex-1 flex items-end">
                <div class="w-6 bg-emerald-100 rounded-t-md overflow-hidden flex items-end justify-center">
                  <div class="w-4 bg-emerald-700 rounded-t-md" style="height:94%;"></div>
                </div>
              </div>
              <div class="text-[9px] text-slate-600 text-center leading-tight">
                纺二·白班
              </div>
              <div class="text-[9px] text-emerald-600">94%</div>
            </div>
          </div>
        </div>
        <div class="flex items-center justify-between text-[10px] text-slate-500 mt-2">
          <span>每根柱体统计单个“车间 · 班次”的巡检任务完成率。</span>
          <span class="text-emerald-600">可在 Web 端查看更多明细</span>
        </div>
      </div>

      <!-- 工序异常占比饼图 -->
      <div class="bg-white rounded-2xl border border-emerald-100 p-3 flex items-center gap-3">
        <div class="flex-1">
          <div class="flex items-center justify-between mb-2">
            <div class="flex items-center gap-1.5">
              <i class="fa-solid fa-chart-pie text-emerald-500 text-xs"></i>
              <span class="text-xs font-medium text-slate-800">工序异常占比</span>
            </div>
            <span class="text-[10px] text-slate-500">今日 · 按异常记录数统计</span>
          </div>
          <div class="flex items-center gap-3">
            <div class="relative w-20 h-20">
              <div class="w-20 h-20 rounded-full" style="background: conic-gradient(#fb923c 0 20%, #facc15 20% 40%, #22c55e 40% 100%);"></div>
              <div class="absolute inset-2 rounded-full bg-white flex flex-col items-center justify-center">
                <span class="text-[9px] text-slate-500">异常占比</span>
                <span class="text-xs font-semibold text-slate-900">24%</span>
              </div>
            </div>
            <div class="flex-1 space-y-1 text-[10px]">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-1.5">
                  <span class="w-2 h-2 rounded-full bg-[#fb923c]"></span>
                  <span class="text-slate-700">粗纺</span>
                </div>
                <span class="text-slate-500">10 次 · 41%</span>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-1.5">
                  <span class="w-2 h-2 rounded-full bg-[#facc15]"></span>
                  <span class="text-slate-700">精梳</span>
                </div>
                <span class="text-slate-500">6 次 · 25%</span>
              </div>
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-1.5">
                  <span class="w-2 h-2 rounded-full bg-[#22c55e]"></span>
                  <span class="text-slate-700">络筒</span>
                </div>
                <span class="text-slate-500">8 次 · 34%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 生产线卡片（按车间命名的生产单元示意） -->
      <div class="space-y-2">
        <a href="device_detail.html" class="block bg-white rounded-2xl border border-emerald-100 p-3">
          <div class="flex items-center justify-between mb-1.5">
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 rounded-xl bg-primarySoft text-primary flex items-center justify-center text-xs">
                1#
              </div>
              <div>
                <div class="text-xs font-semibold text-slate-900">1#纺纱生产线</div>
                <div class="text-[9px] text-slate-500">开清棉 → 梳棉 → 并条 → 精梳 → 粗纺 → 细纺 → 络筒</div>
              </div>
            </div>
            <span class="text-[10px] px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-700 border border-emerald-100">整体正常</span>
          </div>
          <div class="flex items-center justify-between text-[11px] text-slate-600">
            <span>巡检完成：6 / 7 工序</span>
            <span>断头率：0.9% · 能耗：-3.1%</span>
          </div>
        </a>

        <a href="device_detail.html" class="block bg-white rounded-2xl border border-amber-200 p-3">
          <div class="flex items-center justify-between mb-1.5">
            <div class="flex items-center gap-2">
              <div class="w-8 h-8 rounded-xl bg-amber-50 text-amber-600 flex items-center justify-center text-xs">
                2#
              </div>
              <div>
                <div class="text-xs font-semibold text-slate-900">2#纺纱生产线</div>
                <div class="text-[11px] text-slate-500">粗纺/细纺/络筒工序波动</div>
              </div>
            </div>
            <span class="text-[10px] px-2 py-0.5 rounded-full bg-amber-50 text-amber-700 border border-amber-200">轻微异常</span>
          </div>
          <div class="flex items-center justify-between text-[11px] text-slate-600">
            <span>巡检完成：7 / 7 工序</span>
            <span>断头率：0.6% · 能耗：-2.4%</span>
          </div>
        </a>
      </div>
    </div>

    <!-- 底部 TabBar -->
    <div class="h-16 bg-white/95 border-t border-slate-200 flex items-center justify-around px-2">
      <a href="home.html" class="flex flex-col items-center justify-center gap-0.5 text-slate-400">
        <i class="fa-solid fa-house text-sm"></i>
        <span class="text-[11px]">首页</span>
      </a>
      <a href="inspection_tasks.html" class="flex flex-col items-center justify-center gap-0.5 text-slate-400">
        <i class="fa-solid fa-clipboard-list text-sm"></i>
        <span class="text-[11px]">巡检</span>
      </a>
      <a href="dashboard_overview.html" class="flex flex-col items-center justify-center gap-0.5 text-primary">
        <i class="fa-solid fa-chart-column text-sm"></i>
        <span class="text-[11px] font-medium">看板</span>
      </a>
      <a href="analytics_reports.html" class="flex flex-col items-center justify-center gap-0.5 text-slate-400">
        <i class="fa-regular fa-file-lines text-sm"></i>
        <span class="text-[11px]">报表</span>
      </a>
      <a href="settings_permissions.html" class="flex flex-col items-center justify-center gap-0.5 text-slate-400">
        <i class="fa-regular fa-user text-sm"></i>
        <span class="text-[11px]">我的</span>
      </a>
    </div>
  </div>

  <!-- 看板统计配置弹层 -->
  <div id="overviewFilterModal" class="absolute inset-0 bg-black/30 flex items-center justify-center px-4 z-20 hidden">
    <div class="w-full max-w-xs rounded-3xl bg-white shadow-xl border border-emerald-100 p-4 text-[11px]">
      <div class="flex items-center justify-between mb-2">
        <div>
          <div class="text-xs font-semibold text-slate-900">看板统计配置</div>
          <div class="text-[10px] text-slate-500">按统计周期、车间、班次与值班人员过滤巡检数据。</div>
        </div>
        <button onclick="closeOverviewFilterModal()" class="w-7 h-7 rounded-full bg-slate-100 flex items-center justify-center text-slate-500">
          <i class="fa-solid fa-xmark text-[10px]"></i>
        </button>
      </div>
      <div class="space-y-1.5 mb-2">
        <div>
          <label class="block mb-0.5 text-slate-600">统计周期</label>
          <div class="grid grid-cols-4 gap-1.5">
            <button class="px-2 py-1.5 rounded-xl bg-primary text-white text-[10px]">今日</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700 text-[10px]">本周</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700 text-[10px]">本月</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700 text-[10px]">自定义</button>
          </div>
        </div>
        <div>
          <label class="block mb-0.5 text-slate-600">车间（按班次配置命名）</label>
          <div class="grid grid-cols-2 gap-1.5">
            <button class="px-2 py-1.5 rounded-xl bg-primarySoft text-primary">纺一车间 · 1#纺纱线</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700">纺一车间 · 2#纺纱线</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700">纺二车间 · 络筒线</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700">纺二车间 · 粗纺线</button>
          </div>
        </div>
        <div>
          <label class="block mb-0.5 text-slate-600">班次</label>
          <div class="grid grid-cols-3 gap-1.5">
            <button class="px-2 py-1.5 rounded-xl bg-primarySoft text-primary">白班</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700">中班</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700">夜班</button>
          </div>
        </div>
        <div>
          <label class="block mb-0.5 text-slate-600">值班人员</label>
          <div onclick="toggleDutyDropdown()" class="h-8 rounded-xl border border-emerald-100 px-2 flex items-center justify-between cursor-pointer">
            <span id="dutySelected" class="text-slate-500">全部值班人员</span>
            <i class="fa-solid fa-chevron-down text-[9px] text-slate-400"></i>
          </div>
          <div id="dutyDropdown" class="mt-1 rounded-2xl border border-emerald-100 bg-white shadow-lg text-[11px] text-slate-700 hidden">
            <button onclick="selectDuty('全部值班人员')" class="w-full text-left px-3 py-1.5 hover:bg-emerald-50">全部值班人员</button>
            <button onclick="selectDuty('张三 · 白班')" class="w-full text-left px-3 py-1.5 hover:bg-emerald-50">张三 · 白班</button>
            <button onclick="selectDuty('李四 · 中班')" class="w-full text-left px-3 py-1.5 hover:bg-emerald-50">李四 · 中班</button>
            <button onclick="selectDuty('王五 · 夜班')" class="w-full text-left px-3 py-1.5 hover:bg-emerald-50">王五 · 夜班</button>
          </div>
        </div>
      </div>
      <div class="flex items-center justify-between">
        <span class="text-[7px] text-slate-500"></span>
        <div class="flex items-center gap-2">
          <button onclick="closeOverviewFilterModal()" class="px-3 py-1.5 rounded-full border border-slate-200 text-slate-600">
            取消
          </button>
          <button onclick="closeOverviewFilterModal()" class="px-3 py-1.5 rounded-full bg-primary text-white shadow-sm">
            应用
          </button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
