<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>统计与报告 - 彩诗禾-数字一体化厂区管控平台</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#16a34a',
            primaryLight: '#dcfce7',
            primarySoft: '#ecfdf3'
          }
        }
      }
    };
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script>
    function openReportConfigModal() {
      var modal = document.getElementById('reportConfigModal');
      if (modal) modal.classList.remove('hidden');
    }
    function closeReportConfigModal() {
      var modal = document.getElementById('reportConfigModal');
      if (modal) modal.classList.add('hidden');
    }
    function openReportPreviewModal(title) {
      var modal = document.getElementById('reportPreviewModal');
      var titleEl = document.getElementById('reportPreviewTitle');
      if (titleEl) titleEl.textContent = title || '报告样例';
      if (modal) modal.classList.remove('hidden');
    }
    function closeReportPreviewModal() {
      var modal = document.getElementById('reportPreviewModal');
      if (modal) modal.classList.add('hidden');
    }
    function toggleExportDropdown(id) {
      var dropdown = document.getElementById(id);
      if (!dropdown) return;
      dropdown.classList.toggle('hidden');
    }
  </script>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen">
  <div class="w-[393px] h-[852px] bg-gradient-to-b from-emerald-50 to-white rounded-[40px] shadow-[0_20px_60px_rgba(16,185,129,0.45)] border border-emerald-100 overflow-hidden relative flex flex-col">
    <!-- 状态栏 -->
    <div class="h-11 px-4 flex items-center justify-between text-xs text-slate-700">
      <div class="font-semibold">9:41</div>
      <div class="flex items-center gap-1.5">
        <i class="fa-solid fa-signal"></i>
        <i class="fa-solid fa-wifi"></i>
        <i class="fa-solid fa-battery-full"></i>
      </div>
    </div>

    <!-- 顶部导航 -->
    <div class="px-4 pb-2 flex items-center justify-between">
      <button onclick="history.back()" class="w-8 h-8 rounded-full bg-white/80 border border-emerald-100 flex items-center justify-center text-slate-600 text-xs">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <div class="text-sm font-semibold text-slate-900">统计分析与报告</div>
      <button onclick="openReportConfigModal()" class="w-8 h-8 rounded-full bg-white/80 border border-emerald-100 flex items-center justify-center text-slate-600 text-xs" aria-label="报告统计配置">
        <i class="fa-solid fa-gear"></i>
      </button>
    </div>

    <!-- 内容区 -->
    <div class="flex-1 overflow-y-auto px-4 pb-20 bg-gradient-to-b from-emerald-50/80 to-white space-y-3">
      <!-- 统计周期配置（整体说明，由右上角进行详细配置） -->
      <div class="bg-white rounded-2xl border border-emerald-100 p-3 space-y-2">
        <div class="flex items-center justify-between">
          <span class="text-xs font-medium text-slate-800">统计周期配置</span>
          <span class="text-[11px] text-slate-500">示例：纺一车间 · 1#纺纱线 · 周报</span>
        </div>
        <div class="text-[11px] text-slate-500">
          可为不同车间（例如“纺一车间 · 1#纺纱线”）设置独立的统计周期和生成时间点，例如每周一 09:00 自动生成上周运行报告。
          详细配置可通过右上角设置按钮进行调整。
        </div>
      </div>

      <!-- 报告列表 -->
      <div class="bg-white rounded-2xl border border-emerald-100 p-3 space-y-2">
        <div class="flex items-center justify-between">
          <span class="text-xs font-medium text-slate-800">近期报告</span>
          <button class="px-2 py-1 rounded-full bg-primarySoft text-primary text-[11px] flex items-center gap-1">
            <i class="fa-solid fa-wand-magic-sparkles text-[9px]"></i>
            生成最新周报
          </button>
        </div>
        <div class="space-y-1.5 text-[11px]">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-slate-800">纺一车间 · 周报 · 2025-W20</div>
              <div class="text-slate-500">生成时间：2025-05-12 09:05</div>
            </div>
            <div class="flex flex-col items-end gap-1">
              <button onclick="openReportPreviewModal('纺一车间 · 周报 · 2025-W20')" class="px-2 py-0.5 rounded-full border border-emerald-200 text-emerald-700 flex items-center gap-1">
                <i class="fa-regular fa-eye text-[9px]"></i> 查看
              </button>
              <div class="relative">
                <button onclick="toggleExportDropdown('exportDropdown1')" class="px-2 py-0.5 rounded-full border border-slate-200 text-slate-700 flex items-center gap-1">
                  <i class="fa-regular fa-file-lines text-[9px]"></i> 导出
                </button>
                <div id="exportDropdown1" class="absolute right-0 mt-1 rounded-2xl border border-emerald-100 bg-white shadow-lg text-[11px] text-slate-700 hidden z-20">
                  <button class="w-full text-left px-3 py-1.5 hover:bg-emerald-50 flex items-center gap-1">
                    <i class="fa-regular fa-file-pdf text-[9px]"></i> PDF
                  </button>
                  <button class="w-full text-left px-3 py-1.5 hover:bg-emerald-50 flex items-center gap-1">
                    <i class="fa-regular fa-file-word text-[9px]"></i> Word
                  </button>
                  <button class="w-full text-left px-3 py-1.5 hover:bg-emerald-50 flex items-center gap-1">
                    <i class="fa-regular fa-file-excel text-[9px]"></i> Excel
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="flex items-center justify-between">
            <div>
              <div class="text-slate-800">纺二车间 · 月报 · 2025-07</div>
              <div class="text-slate-500">生成时间：2025-07-12 12:11</div>
            </div>
            <div class="flex flex-col items-end gap-1">
              <button onclick="openReportPreviewModal('纺二车间 · 月报 · 2025-04')" class="px-2 py-0.5 rounded-full border border-emerald-200 text-emerald-700 flex items-center gap-1">
                <i class="fa-regular fa-eye text-[9px]"></i> 查看
              </button>
              <div class="relative">
                <button onclick="toggleExportDropdown('exportDropdown2')" class="px-2 py-0.5 rounded-full border border-slate-200 text-slate-700 flex items-center gap-1">
                  <i class="fa-regular fa-file-lines text-[9px]"></i> 导出
                </button>
                <div id="exportDropdown2" class="absolute right-0 mt-1 rounded-2xl border border-emerald-100 bg-white shadow-lg text-[11px] text-slate-700 hidden z-20">
                  <button class="w-full text-left px-3 py-1.5 hover:bg-emerald-50 flex items-center gap-1">
                    <i class="fa-regular fa-file-pdf text-[9px]"></i> PDF
                  </button>
                  <button class="w-full text-left px-3 py-1.5 hover:bg-emerald-50 flex items-center gap-1">
                    <i class="fa-regular fa-file-word text-[9px]"></i> Word
                  </button>
                  <button class="w-full text-left px-3 py-1.5 hover:bg-emerald-50 flex items-center gap-1">
                    <i class="fa-regular fa-file-excel text-[9px]"></i> Excel
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- AI 辅助分析说明 -->
      <div class="bg-white rounded-2xl border border-emerald-100 p-3 text-[11px] text-slate-700 space-y-1.5">
        <div class="flex items-center gap-1.5 mb-1">
          <i class="fa-solid fa-robot text-emerald-500 text-xs"></i>
          <span class="text-xs font-medium text-slate-800">大模型辅助分析说明</span>
        </div>
        <p>
          报告生成时可调用大模型能力，对巡检数据和看板趋势进行文字分析，总结生产线运行稳定性、主要异常原因，并给出优化建议，帮助管理者快速掌握重点。
        </p>
      </div>
    </div>

    <!-- 底部 TabBar -->
    <div class="h-16 bg-white/95 border-t border-slate-200 flex items-center justify-around px-2">
      <a href="home.html" class="flex flex-col items-center justify-center gap-0.5 text-slate-400">
        <i class="fa-solid fa-house text-sm"></i>
        <span class="text-[11px]">首页</span>
      </a>
      <a href="inspection_tasks.html" class="flex flex-col items-center justify-center gap-0.5 text-slate-400">
        <i class="fa-solid fa-clipboard-list text-sm"></i>
        <span class="text-[11px]">巡检</span>
      </a>
      <a href="dashboard_overview.html" class="flex flex-col items-center justify-center gap-0.5 text-slate-400">
        <i class="fa-solid fa-chart-column text-sm"></i>
        <span class="text-[11px]">看板</span>
      </a>
      <a href="analytics_reports.html" class="flex flex-col items-center justify-center gap-0.5 text-primary">
        <i class="fa-regular fa-file-lines text-sm"></i>
        <span class="text-[11px] font-medium">报表</span>
      </a>
      <a href="settings_permissions.html" class="flex flex-col items-center justify-center gap-0.5 text-slate-400">
        <i class="fa-regular fa-user text-sm"></i>
        <span class="text-[11px]">我的</span>
      </a>
    </div>
  </div>

  <!-- 报告统计配置弹层 -->
  <div id="reportConfigModal" class="absolute inset-0 bg-black/30 flex items-center justify-center px-4 z-20 hidden">
    <div class="w-full max-w-xs rounded-3xl bg-white shadow-xl border border-emerald-100 p-4 text-[11px]">
      <div class="flex items-center justify-between mb-2">
        <div>
          <div class="text-xs font-semibold text-slate-900">报告统计配置</div>
          <div class="text-[10px] text-slate-500">配置报告的定时生成周期与适用车间。</div>
        </div>
        <button onclick="closeReportConfigModal()" class="w-7 h-7 rounded-full bg-slate-100 flex items-center justify-center text-slate-500">
          <i class="fa-solid fa-xmark text-[10px]"></i>
        </button>
      </div>
      <div class="space-y-1.5 mb-2">
        <div>
          <label class="block mb-0.5 text-slate-600">报告类型与周期</label>
          <div class="grid grid-cols-3 gap-1.5">
            <button class="px-2 py-1.5 rounded-xl bg-primary text-white text-[10px]">周报</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700 text-[10px]">月报</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700 text-[10px]">自定义</button>
          </div>
        </div>
        <div>
          <label class="block mb-0.5 text-slate-600">适用车间（按班次配置命名）</label>
          <div class="grid grid-cols-2 gap-1.5">
            <button class="px-2 py-1.5 rounded-xl bg-primarySoft text-primary">纺一车间 · 1#纺纱线</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700">纺一车间 · 2#纺纱线</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700">纺二车间 · 络筒线</button>
            <button class="px-2 py-1.5 rounded-xl bg-emerald-50 text-slate-700">纺二车间 · 粗纺线</button>
          </div>
        </div>
        <div>
          <label class="block mb-0.5 text-slate-600">统计生成时间</label>
          <div class="h-8 rounded-xl border border-emerald-100 px-2 flex items-center justify-between">
            <span class="text-slate-500">每周一 · 09:00</span>
            <i class="fa-regular fa-clock text-[10px] text-slate-400"></i>
          </div>
        </div>
      </div>
      <div class="flex items-center justify-between">
        <span class="text-[7px] text-slate-500">配置仅影响定时生成计划，不影响历史报告。</span>
        <div class="flex items-center gap-2">
          <button onclick="closeReportConfigModal()" class="px-3 py-1.5 rounded-full border border-slate-200 text-slate-600">
            取消
          </button>
          <button onclick="closeReportConfigModal()" class="px-3 py-1.5 rounded-full bg-primary text-white shadow-sm">
            保存
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 报告样例预览弹层 -->
  <div id="reportPreviewModal" class="absolute inset-0 bg-black/40 flex items-center justify-center px-4 z-30 hidden">
    <div class="w-full max-w-sm rounded-3xl bg-white shadow-xl border border-emerald-100 p-4 text-[11px] max-h-[80vh] overflow-y-auto">
      <div class="flex items-center justify-between mb-2">
        <div>
          <div id="reportPreviewTitle" class="text-xs font-semibold text-slate-900">报告样例</div>
          <div class="text-[10px] text-slate-500">以下为移动端压缩版内容示意。</div>
        </div>
        <button onclick="closeReportPreviewModal()" class="w-7 h-7 rounded-full bg-slate-100 flex items-center justify-center text-slate-500">
          <i class="fa-solid fa-xmark text-[10px]"></i>
        </button>
      </div>
      <div class="space-y-1.5 text-[11px] text-slate-700">
        <div class="font-semibold text-slate-900">一、生产运行概览</div>
        <p class="leading-relaxed">
          本周期内，纺一车间 · 1#纺纱线整体运行稳定，班次巡检完成率为 <span class="text-emerald-600 font-semibold">92%</span>，
          共记录异常 <span class="text-orange-500 font-semibold">5</span> 起，均已在规定时间内完成处理。
        </p>
        <div class="font-semibold text-slate-900 mt-2">二、关键指标趋势</div>
        <p>· 断头率：平均 0.9%，较上周期下降 0.2%。</p>
        <p>· 能耗：平均能耗较上周期下降 3.1%。</p>
        <div class="font-semibold text-slate-900 mt-2">三、异常统计与处理</div>
        <p>· 粗纺工序异常 3 起，主要为张力波动与断头率短时升高。</p>
        <p>· 络筒工序异常 2 起，主要集中在夜班，已通过调整工艺参数优化。</p>
        <div class="font-semibold text-slate-900 mt-2">四、AI 建议摘要（示意）</div>
        <p>
          建议重点关注夜班人员操作规范培训，并对粗纺段张力控制策略进行复盘，
          同时适当优化巡检频次，以提前发现潜在波动。
        </p>
      </div>
    </div>
  </div>
</body>
</html>
